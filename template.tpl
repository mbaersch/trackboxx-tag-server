___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Trackboxx",
  "categories": [
    "ANALYTICS"
  ],
  "brand": {
    "id": "mbaersch",
    "displayName": "mbaersch",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Send pageviews, downloads, links or ecom events to Trackboxx",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "GROUP",
    "name": "groupSettings",
    "displayName": "Trackboxx Settings",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "siteId",
        "displayName": "Site ID",
        "simpleValueType": true,
        "help": "Paste ID for your website from Trackboxx backend",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "domain",
        "displayName": "Domain",
        "simpleValueType": true,
        "defaultValue": "",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "timeout",
        "displayName": "Timeout (ms)",
        "simpleValueType": true,
        "defaultValue": 1000,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          },
          {
            "type": "POSITIVE_NUMBER"
          }
        ]
      },
      {
        "type": "SELECT",
        "name": "trackType",
        "displayName": "Tracking Type",
        "selectItems": [
          {
            "value": "auto",
            "displayValue": "Pages, Links \u0026 E-Commerce"
          },
          {
            "value": "conversion",
            "displayValue": "Goal Conversion"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "auto",
        "help": "This tag tracks pages, external links (optional: downloads as links) and ecom events (add_to_cart, purchase). Select \"Goal Conversion\" if you want to track a specific goal with this tag",
        "alwaysInSummary": true
      },
      {
        "type": "TEXT",
        "name": "goalId",
        "displayName": "Goal ID",
        "simpleValueType": true,
        "help": "Enter ID from Trackboxx backend for this goal (format / example: \"1ABCDEFGH0\")",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "trackType",
            "paramValue": "conversion",
            "type": "EQUALS"
          }
        ],
        "alwaysInSummary": true
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "groupAdvanced",
    "displayName": "Advanced Settings",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "deleteReferrer",
        "checkboxText": "Do Not Send Referrer",
        "simpleValueType": true
      },
      {
        "type": "CHECKBOX",
        "name": "redactUrlParams",
        "checkboxText": "Do Not Send URL Parameters",
        "simpleValueType": true
      },
      {
        "type": "CHECKBOX",
        "name": "setPath",
        "checkboxText": "Override Page Path",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "setPathVar",
        "displayName": "Page Path",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "setPath",
            "paramValue": true,
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "CHECKBOX",
        "name": "trackDownloads",
        "checkboxText": "Track Downloads As External Links",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "trackType",
            "paramValue": "auto",
            "type": "EQUALS"
          }
        ]
      }
    ]
  },
  {
    "displayName": "Logs Settings",
    "name": "logsGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "type": "RADIO",
        "name": "logType",
        "radioItems": [
          {
            "value": "no",
            "displayValue": "Do not log"
          },
          {
            "value": "debug",
            "displayValue": "Log to console during debug and preview"
          },
          {
            "value": "always",
            "displayValue": "Always log to console"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "debug"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

/**
 * @description Custom server-side Google Tag Manager Tag Template
 * Send events to Trackboxx
 * @version 1.0.1
 * @see {@link https://github.com/mbaersch|GitHub} for more info
 * @see {@link http://trackboxx.com/|Trackboxx Homepage}
 */

const getAllEventData = require('getAllEventData');
const sendHttpRequest = require('sendHttpRequest');
const JSON = require('JSON');
const parseUrl = require('parseUrl');
const getRequestHeader = require('getRequestHeader');
const getRemoteAddress = require('getRemoteAddress');
const sha256Sync = require('sha256Sync');
const makeString = require('makeString');
const getContainerVersion = require('getContainerVersion');
const logToConsole = require('logToConsole');

const isLoggingEnabled = determinateIsLoggingEnabled();
const traceId = getRequestHeader('trace-id');
const ip = getRemoteAddress();
const ip_hash = sha256Sync(ip);
const eventData = getAllEventData();
let serviceUrl, trackboxxEvent, track_url = eventData.page_location;
const parsedUrl = parseUrl(track_url);
const name = eventData.event_name || "";

let trackboxxEvents = {
  page_view: "pageview",
  click: "event",
  add_to_cart: "AddToCart", 
  purchase: "order"
};

if (data.trackDownloads)
  trackboxxEvents.file_download = "event";

/******************************************************/

function determinateIsLoggingEnabled() {
  const containerVersion = getContainerVersion();
  const isDebug = !!(
      containerVersion &&
      (containerVersion.debugMode || containerVersion.previewMode)
  );

  if (!data.logType) return isDebug;
  if (data.logType === 'no') return false;
  if (data.logType === 'debug') return isDebug;
  return data.logType === 'always';
}

const stpLog = function(tp, en, prms) {   
  if (isLoggingEnabled) {
    var ob = {
        Name: 'Trackboxx',
        Type: tp,
        TraceId: traceId,
        EventName: makeString(en),
    };
    
    if (tp === "Request") {        
        ob.RequestMethod = prms.method;
        ob.RequestUrl = serviceUrl;
        ob.RequestBody = trackboxxEvent;
    } else {
        ob.ResponseStatusCode = prms.statusCode;
        ob.ResponseHeaders = prms.headers;
        ob.ResponseBody = prms.body;
    }
    logToConsole(JSON.stringify(ob));
  }
};

const sendToService = function(tp) {
  let payload = tp === "POST" ? JSON.stringify(trackboxxEvent) : undefined;
  sendHttpRequest(
    serviceUrl, (statusCode, headers, body) => {
      stpLog('Response', name, {statusCode: statusCode, headers: headers, body: body});
      if (statusCode >= 200 && statusCode < 300) data.gtmOnSuccess();
      else data.gtmOnFailure();
    }, { headers: {
          'content-type': 'text/plain;charset=UTF-8',
          'user-agent': (eventData.user_agent || getRequestHeader("user-agent")) + "/" + ip_hash,
          //ip as header is not used on receiverÂ´s side so we add its hash to the ua for entropy
          //'user-agent': eventData.user_agent || getRequestHeader("user-agent"),
          //'remote_addr': ip,
          //'x-forwarded-for': ip,
    },
      method: tp,
      timeout: data.timeout||1000,
    }, payload
  );  
};

/******************************************************/

const ref = data.deleteReferrer === true ? "" : eventData.page_referrer || "";
let page = (data.setPath === true) && data.setPathVar ?
    data.setPathVar : track_url.split(parsedUrl.hostname)[1];
if (data.redactUrlParams === true)
  page = page.split("?")[0];

if (data.trackType === "conversion") {
  //track goal
  serviceUrl = "https://hit.trackboxx.info/hit-goal";
  trackboxxEvent = {
    goalId : data.goalId,
    h: data.domain, 
    p: page,
    r: ref, 
    res: data.screen_resolution,
    sid: data.siteId, 
  };
  
  stpLog('Request', name + " (goal)", {method: 'POST'});
  sendToService('POST');
    
} else if (track_url && trackboxxEvents[name]) {

  if (name === "page_view") {
    //pages
    serviceUrl = "https://hit.trackboxx.info/visit-handler";
    serviceUrl += "?p="+page+"&h="+data.domain+"&r="+
      ref+"&res="+data.screen_resolution+"&sid="+data.siteId;
    
    stpLog('Request', name, {method: 'GET'});
    sendToService('GET');
    
  } else {
    //ecom event or link click
    serviceUrl = "https://hit.trackboxx.info/hit-action";
    let ecomType = trackboxxEvents[name];
    
    if (ecomType === "event") {
      trackboxxEvent = {
        action: "external-click",
        externalUrl: eventData.link_url,
        h: data.domain, 
        p: page,
        r: ref, 
        res: data.screen_resolution,
        sid: data.siteId, 
      };
    } else {
      trackboxxEvent = {
        action: "Purchase",
        c:[{type: ecomType,
            id: eventData.transaction_id
          }],
        h: data.domain, 
        p: page,
        r: ref, 
        res: data.screen_resolution,
        sid: data.siteId, 
      };
      eventData.items.forEach(item => {
        trackboxxEvent.c.push({type: "product",
          name: item.item_name,
          price: item.price
        });
      });
    }
    
    stpLog('Request', name, {method: 'GET'});
    sendToService('POST');
  }

} else {
  //current event not relevant for Trackboxx
  data.gtmOnSuccess();
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "remoteAddressAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "headersAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 5.4.2024, 05:01:54


